<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Cry9c Fan Chat</title>
<style>
    body { font-family: Arial, sans-serif; }
    #chat { height: 300px; overflow-y: scroll; border: 1px solid #ccc; padding: 5px; }
    #message { width: 70%; }
</style>
</head>
<body>
<div id="chat"></div>
<input id="message" type="text" placeholder="Enter message" autofocus>
<button id="send">Send</button>

<script>
    const chat = document.getElementById('chat');
    const messageInput = document.getElementById('message');

    const ws = new WebSocket('ws://localhost:8080/ws');

    ws.onopen = function() {
        chat.innerHTML += '<p><em>Connected!</em></p>';
    };

    ws.onmessage = function(event) {
        chat.innerHTML += '<p>Server: ' + event.data + '</p>';
        chat.scrollTop = chat.scrollHeight; // Auto-scroll to latest message
    };

    ws.onerror = function() {
        chat.innerHTML += '<p><em>Error connecting to server.</em></p>';
    };

    ws.onclose = function() {
        chat.innerHTML += '<p><em>Disconnected from server.</em></p>';
    };

    document.getElementById('send').onclick = function() {
        if (messageInput.value.trim() === '') return;
        ws.send(messageInput.value);
        chat.innerHTML += '<p>You: ' + messageInput.value + '</p>';
        messageInput.value = '';
        chat.scrollTop = chat.scrollHeight; // Auto-scroll to latest message
    };
</script>
</body>
</html>
